<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DB Migration Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body>

<div class="app">

    <aside class="sidebar">
        <h2>DB Migration</h2>
        <button onclick="openPopup()">+ Add DB</button>
    </aside>

    <main class="content">

        <header>
            <h1>Migration Jobs</h1>
        </header>

        <section class="jobs">

            <div class="job-card" th:each="job : ${jobs}">
                <div class="job-header">
                    <span>Job #<b th:text="${job.id}"></b></span>
                    <span class="status" th:text="${job.status}"></span>
                </div>

                <div class="progress">
                    <div class="bar"
                         th:style="'width:' + ${job.progress} + '%'"></div>
                </div>

                <div class="actions">
                    <button th:onclick="'viewLogs(' + ${job.id} + ')'">
                        Logs
                    </button>
                </div>
            </div>

        </section>

        <section class="logs">
            <h3>Logs</h3>
            <pre id="logBox">Select a job to view logs</pre>
        </section>

    </main>
</div>

<!-- DB POPUP -->
<div id="popup" class="modal">
    <div class="modal-content">
        <h3>Add Database</h3>
        <form method="post" th:action="@{/db/save}">
            <input name="name" placeholder="Name" required>
            <select name="dbType">
                <option value="oracle">Oracle</option>
                <option value="postgres">PostgreSQL</option>
            </select>
            <input name="host" placeholder="Host">
            <input name="port" placeholder="Port">
            <input name="dbName" placeholder="Database">
            <input name="schema" placeholder="Schema">
            <input name="username" placeholder="Username">
            <input name="password" type="password" placeholder="Password">
            <button type="submit">Save</button>
            <button type="button" onclick="closePopup()">Cancel</button>
        </form>
    </div>
</div>

<script th:src="@{/js/dashboard.js}"></script>
</body>
</html>
